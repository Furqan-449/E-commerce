import{a as c}from"./index-Dq7h7Pqt.js";const l=document.getElementById("categoryModal");document.getElementById("add-category").addEventListener("click",function(){document.getElementById("categoryName").value="",document.getElementById("add-cat-error-message").textContent="",l.style.display="block"});document.getElementById("categoryName").addEventListener("input",function(){document.getElementById("add-cat-error-message").innerText=""});document.getElementById("cancel-category").addEventListener("click",function(){l.style.display="none"});document.querySelectorAll(".add-subcategory").forEach(s=>{s.addEventListener("click",function(){const n=this.getAttribute("data-id");document.getElementById("parent_id").value=n,document.getElementById("subcategoryName").value="",document.getElementById("subcategoryModal").style.display="block"})});document.getElementById("add-new-category").addEventListener("click",function(s){s.preventDefault();const n=document.getElementById("categoryName").value,t=document.getElementById("add-cat-error-message"),d=document.getElementById("messageBlock"),o=document.getElementById("messages");n||(t.textContent="Please enter a category name.",t.style.color="red"),c.post("/add_category_name",{categoryName:n,parent_id:null}).then(e=>{if(console.log(JSON.stringify(e)),document.getElementById("categoryName").value="",document.getElementById("categoryModal").style.display="none",e.data.success&&e.status===200){d.style.display="block";const a=e.data.success;d.style.color="green",o.textContent=a,setTimeout(()=>{window.location.reload()},1e3)}d.style.display==="block"&&setTimeout(()=>{d.style.display="none"},2e3)}).catch(e=>{if(e.response&&e.response.status===400){const a=e.response.data.error;document.getElementById("add-cat-error-message").textContent=a}})});document.querySelectorAll(".edit-category").forEach(s=>{s.addEventListener("click",function(){const n=this.dataset.id,t=this.dataset.name;document.getElementById("editCategoryId").value=n,document.getElementById("editCategoryName").value=t,document.getElementById("editCategoryModal").style.display="block"})});document.getElementById("update-category").addEventListener("click",function(s){s.preventDefault();const n=document.getElementById("editCategoryId").value,t=document.getElementById("editCategoryName").value,d=document.getElementById("edit-cat-error-message"),o=document.getElementById("messageBlock"),e=document.getElementById("messages");if(!t){d.textContent="Please enter a new category name.",d.style.color="red";return}c.post("/edit_category",{id:n,new_name:t}).then(a=>{if(document.getElementById("editCategoryName").value="",document.getElementById("editCategoryModal").style.display="none",a.data.success&&a.status===200){o.style.display="block";const r=a.data.success;o.style.color="green",e.textContent=r}setTimeout(()=>{window.location.reload()},1e3),o.style.display==="block"&&setTimeout(()=>{o.style.display="none"},2e3)}).catch(a=>{a.response&&a.response.data&&a.response.data.error&&(o.style.display="block",o.style.color="red",e.textContent=a.response.data.error,setTimeout(()=>{o.style.display="none"},2e3))})});document.querySelectorAll(".add-subcategory").forEach(s=>{s.addEventListener("click",function(){const n=this.dataset.id,t=this.dataset.name;document.getElementById("subcategoryId").value=n,document.getElementById("parent_of_sub").innerText=" (Parent "+t+")",document.getElementById("error").textContent="",document.getElementById("subcategoryModal").style.display="block"})});document.getElementById("add-sub-category").addEventListener("click",function(s){s.preventDefault();const n=document.getElementById("subcategoryName").value,t=document.getElementById("messageBlock"),d=document.getElementById("messages");if(n.trim()===""){document.getElementById("error").textContent="Enter subcategory name!";return}c.post("/add_subcategory",{name:n,parent_id:document.getElementById("parent_id").value}).then(o=>{t.style.display="block";const e=o.data.success;t.style.color="green",d.textContent=e,setTimeout(()=>{window.location.reload()},1e3),t.style.display==="block"&&setTimeout(()=>{t.style.display="none"},2e3)}).catch(o=>{const e=o.response.data.error;document.getElementById("error").textContent=e})});document.querySelector(".cancel-edit-btn").addEventListener("click",function(){document.getElementById("editCategoryModal").style.display="none"});document.querySelector(".cancel-sub-btn").addEventListener("click",function(){document.getElementById("subcategoryModal").style.display="none"});
