import{a as s}from"./index-Dq7h7Pqt.js";window.pricehandle=function(e,o=!0){let t=parseInt(e.value);const a=e.closest(".cart-item");if(t<=0||isNaN(t)){const l=a.querySelector(".item-id").textContent.trim();s.post(`/man_update_quantity/${l}`,{quantity:0}).then(r=>{r.data.status==="deleted"&&(a.remove(),c(),showFlashMessage(r.data.message,"success"))}).catch(r=>{console.error("Error deleting item:",r),showFlashMessage("Failed to remove item","error"),e.value=1});return}const n=parseFloat(e.dataset.price),i=t*n,u=a.querySelector(".item-total-value");if(u.textContent=i.toFixed(2),c(),o){const l=a.querySelector(".item-id").textContent.trim();s.post(`/man_update_quantity/${l}`,{quantity:t}).then(r=>{}).catch(r=>{console.error("Error updating quantity (manual):",r)})}};window.increasequan=function(e){const o=e.closest(".cart-item"),t=e.previousElementSibling;t.value=parseInt(t.value)+1,pricehandle(t,!1);const a=o.querySelector(".item-id").textContent.trim();s.post(`/update_quantity/${a}`).then(n=>{}).catch(n=>{console.error("Error updating quantity:",n)})};window.decreasequan=function(e){const o=e.closest(".cart-item"),t=e.nextElementSibling;let a=parseInt(t.value)-1;const n=o.querySelector(".item-id").textContent.trim();if(a<1||isNaN(a)){window.location.href=`/cart_item_delete/${n}`;return}pricehandle(t,!1),s.post(`/quantity_decrease/${n}`).then(i=>{}).catch(i=>{console.error("Error updating quantity:",i)}),t.value=a,pricehandle(t)};function c(){const e=document.querySelectorAll(".item-total-value");let o=0;e.forEach(a=>{o+=parseFloat(a.textContent)});const t=document.querySelector(".summary-row span.subtotal-value");t&&(t.textContent=`$${o.toFixed(2)}`),document.getElementById("subtotal-value").textContent=`$${o.toFixed(2)}`}setTimeout(()=>{const e=document.querySelector(".alert");e&&(e.style.display="none")},1e3);
